<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DOCU ASSISTANT</title>
<style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin:0; padding:20px; }
    h2, h3 { color: #d15600; }
    .section { background: #fff; padding: 15px 20px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    label { display: block; margin: 8px 0; }
    input[type=text], select, textarea { width: 100%; padding: 8px; margin-top: 4px; border-radius:5px; border:1px solid #ccc; }
    textarea { resize: vertical; }
    button { margin-top: 10px; cursor: pointer; background: #007bff; color: #fff; border: none; border-radius:5px; transition: 0.2s; }
    button:hover { background: #0056b3; }
    .checkbox-grid label { display:flex; align-items:center; margin-bottom:6px; }
    .checkbox-grid input[type=text] { width: 150px; margin-left: 10px; }
    .quickPhraseBtn { display:inline-block; background:#e0e0e0; padding:5px 10px; margin:3px; border-radius:5px; cursor:pointer; transition:0.2s; }
    .quickPhraseBtn:hover { background:#c0c0c0; }
    .hidden { display:none; }
  /* ====== 3 COLUMN LAYOUT ====== */

.app-container {
  max-width: 1200px;
  margin: 0 auto;
  height: 480px;        /* ðŸ”¥ compact but readable */
  overflow: hidden;
}
.column {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.section {
  border-top: 1px solid #e0e0e0;
  padding-top: 6px;
}
.section:first-child {
  border-top: none;
}
.column {
  background: #ffffff;
}

.column {
  border: 1px solid #d0d0d0;
  border-radius: 6px;
  padding: 8px;
  background: #fafafa;
}

/* Section polish */
.section {
  margin-bottom: 0; /* grid handles spacing now */
}

.section h3 {
  font-size: 13px;
  margin-bottom: 4px;
}


/* Reduce visual noise */
label {
  line-height: 1.1;
  margin: 2px 0;
}

input[type=text],
select,
textarea {
  font-size: 13px;
}

/* Compact checkbox grids */
.checkbox-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap:.05px;
}

/* Quick phrases spacing */
#quickPhrasesContainer {
  margin: 8px 0;
}

/* Documentation text areas */
#currentDoc,
#historyDoc {
  font-size: 13px;
  line-height: 1.4;
}
/* ===== DXC BRAND BASE ===== */
body {
  background-color: #F6F3F0;
  font-family: "Segoe UI", Arial, sans-serif;
  color: #0E1020;
}

/* App width + height control */
.app-container {
  max-width: 1200px;
  margin: 0 auto;
  height: 75vh;               /* ðŸ‘ˆ 50% of viewport height */
  overflow-y: auto;           /* scroll only if needed */
  padding: 16px;
}

/* Section cards */
.section {
  background: #FFFFFF;
  border-radius: 10px;
  padding: 14px 16px;
  box-shadow: 0 2px 6px rgba(14,16,32,0.08);
}

/* Section headers */
.section h3 {
  color: #0E1020;
  font-size: 15px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}
/* ===== 4 TOP / 2 BOTTOM GRID (COMPACT) ===== */
.app-container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
}

.column {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Bottom row spans 2 columns each */
.column.bottom {
  grid-column: span 2;
}


label {
  font-size: 12px;
  font-weight: 600;
  color: #0E1020;
}

input[type="text"],
input[type="date"],
select,
textarea {
  width: 95%;
  padding: 6px 8px;
  font-size: 12.5px;
  border-radius: 6px;
  border: 1px solid #DADCE5;
  background-color: #FFFFFF;
}

textarea {
  resize: none;
  min-height: 40px;
  max-height: 55px;
  overflow-y: auto;
}
#currentDoc,
#historyDoc {
  min-height: 55px;
  max-height: 70px;
}
<div id="docuStatus" class="docu-status"></div>

button {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

/* Primary */
.btn-primary {
  background-color: #004AAC;
  color: #FFFFFF;
}

/* Secondary */
.btn-secondary {
  background-color: #4995FF;
  color: #FFFFFF;
}

/* Accent / utility */
.btn-accent {
  background-color: #FFAE41;
  color: #0E1020;
}
.required {
  color: #FF7E51;
}

.auth-complete {
  background-color: #A1E6FF;
  padding: 4px 6px;
  border-radius: 4px;
  font-size: 11px;
}
#currentDoc,
#historyDoc {
  max-height: 110px;
  overflow-y: auto;
}
/* ===== INPUT & TEXTAREA COMPACT MODE ===== */
input[type="text"],
select,
textarea {
  font-size: 10px;
  padding: 5px 6px;
  border-radius: 5px;
}

/* Textareas specifically */
textarea {
  padding: 10px;              /* space from border */
  min-height: 40px;          /* smaller box */
  line-height: 1.3;
}

/* Documentation boxes */
#currentDoc,
#historyDoc {
  font-size: 10px;
  padding: 8px;
  min-height: 80px;
}
label {
  font-size: 10px;
  font-weight: 600;
  margin-bottom: 4px;
}
/* ===== COMPACT SECTION CARDS ===== */
.section {
  padding: 6px;
}
input[type="text"],
select,
textarea {
  font-size: 10px;
  padding: 5px 6px;
  border-radius: 5px;
}

textarea {
  padding: 8px;
  min-height: 55px;
  line-height: 1.3;
}

label {
  font-size: 10px;
  font-weight: 600;
  margin-bottom: 4px;
}

#quickLinks {
  position: fixed;
  top: 80px;
  left: 10px;
  width: 160px;
  padding: 10px;
  background: #f7f7f7;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  font-size: 13px;
  z-index: 999;
}

#quickLinks .ql-title {
  font-weight: bold;
  margin-bottom: 8px;
  text-align: center;
}

#quickLinks a {
  display: block;
  text-decoration: none;
  color: #333;
  padding: 6px 4px;
  border-radius: 4px;
}

#quickLinks a:hover {
  background: #e0e0e0;
}
#quickLinks {
  position: fixed;
  top: 100px;
  left: 10px;
  width: 300px;          /* ðŸ‘ˆ wider */
  padding: 12px;
  background: #ffffff;
  border: 1px solid #999;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  z-index: 99999;
}

#quickLinks a {
  display: block;
  margin-top: 8px;
  color: #000;
  text-decoration: none;
}
.notes-container {
  position: fixed;
  bottom: 400px;
  right: 20px;
  width: 350px;
  height: 360px;                 /* ðŸ‘ˆ define total height */
  background: #fff;
  border: 1px solid #999;
  border-radius: 10px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.25);
  z-index: 9999;

  display: flex;
  flex-direction: column;

  resize: both;          /* ðŸ‘ˆ allows resize */
  overflow: hidden;      /* ðŸ‘ˆ prevents scrollbars outside */
  min-width: 280px;
  min-height: 260px;
  max-width: 600px;
  max-height: 80vh;
}

.notes-container::after {
  content: "â†˜";
  position: absolute;
  bottom: 4px;
  right: 6px;
  font-size: 10px;
  color: #aaa;
  pointer-events: none;
}

/* Header */
.notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 6px;          /* tighter */
  background: #f0f0f0;
  border-bottom: 1px solid #ccc;
  font-size: 12px;
}

/* Text area â€“ tighter + shorter */


/* Buttons container */
.notes-buttons {
  display: grid;
  grid-template-columns: repeat(2, 1fr);  /* neat 2-column grid */
  gap: 4px;
  padding: 6px;
}
.notes-container textarea {
  flex: 1;            /* ðŸ‘ˆ THIS is the magic */
  margin: 0;
}

#notesArea {
  min-height: 95px;     /* ~8 rows */
  max-height: 160px;     /* locks height so scroll starts after */
  line-height: 1.25;
  font-size: 11px;
  padding: 6px;
  resize: vertical;     /* allow manual resize if desired */
  overflow-y: auto;
}

/* Buttons container */
.notes-buttons {
  padding: 4px 6px;
  gap: 4px;
}

.notes-buttons button {
  font-size: 10px;
  padding: 4px 6px;
}


/* Minimized icon */
#notesMinimized {
  position: fixed;
  bottom: 150px;
  right: 20px;

  width: 64px;          /* ðŸ‘ˆ bigger */
  height: 64px;         /* ðŸ‘ˆ bigger */

  display: none;
  align-items: center;
  justify-content: center;

  background: #f5f5f5;
  border: 2px solid #888;   /* ðŸ‘ˆ slightly thicker border */
  border-radius: 50%;

  cursor: pointer;
  z-index: 10000;

  font-size: 26px;      /* ðŸ‘ˆ icon/text bigger */
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}


.docu-status {
  font-size: 10px;
  line-height: 1.2;
  min-height: 12px;
  margin: 2px 6px 4px;
  color: #2e7d32;
  opacity: 0;
  transition: opacity 0.2s ease;
}


</style>
</head>
<body>

<h2>DOCU ASSISTANT</h2>



 <div class="app-container">
<!-- CALLER INFO -->

 <div class="column">
  <button onclick="startNewCall()" class="btn-secondary">
  New Call
</button>
  <h3>Caller Details & Authentication</h3>
  <label>Policy Number:<input type="text" id="policyNumber"></label>
  <label>Caller Name:<input type="text" id="callerName"></label>
  <label>Best Callback #:<input type="text" id="callerPhone"></label>
  <label>Is caller the PO/Bene?
    <select id="callerRole" onchange="showAuthByRole()">
      <option value="">-- Select Caller Role --</option>
      <option value="company1035">1035 Company</option>
      <option value="activeAgent">Active Agent</option>
      <option value="activeAgentAssistant">Active Agent Assistant</option>
      <option value="assigneeCompany">Assignee Company</option>
      <option value="beneficiaryEstate">Beneficiaryâ€™s Estate</option>
      <option value="company">Company</option>
      <option value="funeralHome">Funeral Home / Funding Company</option>
      <option value="gabor">Gabor</option>
      <option value="livingBeneficiary">Living Beneficiary</option>
      <option value="livingContingentBeneficiary">Living Contingent Beneficiary</option>
      <option value="namedEstate">Named Estate as Beneficiary</option>
      <option value="annuityPayee">Payee on Annuity Payout</option>
      <option value="policyOwner">Policy Owner</option>
      <option value="premiumPayor">Premium Payor</option>
      <option value="servicingAgent">Servicing Agent</option>
      <option value="servicingAgentAssistant">Servicing Agent Assistant</option>
      <option value="thirdParty">Third Party / POA</option>
      <option value="trust">Trust</option>
      <option value="trustBeneficiary">Trust as Beneficiary</option>
      <option value="amelia">Authenticating with Amelia</option>
    </select>
  </label>

  <div id="authSection" class="hidden">
    <h4>Authentication Checklist</h4>
    <div id="authChecklist"></div>
  </div>
</div>


<!-- CALL REASON -->
 <div class="column">
  <h3>Call Reason</h3>
  <label>Reason for Call:
    <select id="callReason" onchange="showQuickPhrases()">
      <option value="">-- Select Reason --</option>
      <option>Question</option>
      <option>ITS Request</option>
    <option>1035 Status</option>
<option>Abort/Hang Up/Disconnect - Insured</option>
<option>Accounting/Billing Issues</option>
<option>ACH Payment</option>
<option>Address Change</option>
<option>Agent call/Policy Status</option>
<option>Agent call/Values</option>
<option>Amount due on the policy</option>
<option>Annual Statement</option>
<option>Annuity WD</option>
<option>Bank Account Update</option>
<option>Beneficiary Change</option>
<option>Billing</option>
<option>Billing - Payment Status</option>
<option>Billing - question about notice</option>
<option>Call Disconnected</option>
<option>Cancellation</option>
<option>Change Payment Plan - Amount</option>
<option>Check Status</option>
<option>CLAIMS Notification of Death Lapsed Policy</option>
<option>CLAIM Inquiry Regarding Paid Claim</option>
<option>CLAIMS Paperwork Explanation</option>
<option>CLAIMS Status of Claim in Process</option>
<option>Claims_notification of death</option>
<option>Claims_Status</option>
<option>Conversion</option>
<option>Coverage Confirmation/ Policy Status - Agent</option>
<option>DI Claim</option>
<option>Distribution Inquiry</option>
<option>Duplicate Policy</option>
<option>Escalated Call</option>
<option>Escalated</option>
<option>Form Explanation</option>
<option>Form Request</option>
<option>Form Assistance</option>
<option>General Questions</option>
<option>General Inquiry - Agent</option>
<option>General Inquiry - Insured</option>
<option>Illustration Request</option>
<option>Incoming Fax_Mail Received</option>
<option>IRD Outbound Policy Cancelled Wrong Product</option>
<option>Loan by Phone</option>
<option>Loan Request</option>
<option>Loan Status</option>
<option>Mailing Address_Phone_Fax</option>
<option>Maturity</option>
<option>Metlife Outbound Customer Hung Up</option>
<option>Misdirected Call</option>
<option>NB_Policy Status</option>
<option>No Authorization</option>
<option>No disposition</option>
<option>Notify of Waiver of DI Claim</option>
<option>Other</option>
<option>Ownership Change</option>
<option>Partial Withdrawal</option>
<option>Pay by Phone_Credit Card</option>
<option>Payment Process - Agent</option>
<option>Payment Received</option>
<option>Payment Status</option>
<option>Policy Change</option>
<option>Policy Change/Status/Value/Quote</option>
<option>Policy Info_Authorization</option>
<option>Policy Info_No Authorization</option>
<option>Policy Info/Values</option>
<option>Policy Status</option>
<option>Policy Value</option>
<option>Premium_online payment issue</option>
<option>Premium_Payment being mailed</option>
<option>Privacy Notice</option>
<option>Reinstatement</option>
<option>Reinstatement Request</option>
<option>RMD</option>
<option>Status of Existing Request</option>
<option>Surrender</option>
<option>Surrender Request</option>
<option>Surrender Status</option>
<option>System Down</option>
<option>Tax Question</option>
<option>Tax Inquiry</option>
<option>Transfer Other</option>
<option>Unauthorized Caller</option>
<option>Unknown_PolNum_PO</option>
<option>Withdrawal/Surrender Request/Status</option>
<option>Website Assistance</option>
</select>
</label>
<div id="quickPhrasesContainer"></div>
<label>Additional Notes:<textarea id="freeNotes" placeholder="Free-form notes..."></textarea></label>
</div>

<!-- VALUES INQUIRY -->
 <div class="column">
  <h3>Values Provided</h3>
  <div class="checkbox-grid">
<label><input type="checkbox" class="valueItem" value="As Of Date"> As of Date: <input type="date" class="valueField" placeholder="Enter Date"></label>
    <label><input type="checkbox" class="valueItem" value="Face Amount"> Face Amount: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Death Benefit"> Death Benefit: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Loan Amount"> Loan Amount: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Interest Rate"> Interest Rate: <input type="text" class="valueField" placeholder="Enter %"></label>
    <label><input type="checkbox" class="valueItem" value="COI Amount"> COI Amount: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Premium"> Premium: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Billed to Date"> Billed to Date: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Net Cash Value"> Net Cash Value: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="Cash Surrender Value"> Cash Surrender Value: <input type="text" class="valueField" placeholder="Enter amount"></label>
    <label><input type="checkbox" class="valueItem" value="RMD Amount"> RMD Amount: <input type="text" class="valueField" placeholder="Enter amount"></label>
  </div>
</div>

<!-- RESOLUTION & WORK TYPE -->
 <div class="column">
  <h3>Resolution & Work Type</h3>
  <label>Work Created:
   <select id="createdWork">
  <option value="none">-- Select --</option>
  <option value="Created Work Item">Created Work Item</option>
  <option value="1099">1099 â€“ 7 Business Days</option>
<option value="712">712 Interpolated Terminal Reserve / Form 712 â€“ 7 Business Days</option>
<option value="712DTH">712DTH (Due to Death) â€“ 7 Business Days</option>

<option value="ADDCHG">ADDCHG Address Change â€“ 7 Business Days</option>

<option value="ANN_CORRESP">(ANN) CORRESP Status Letter â€“ 7 Business Days</option>
<option value="ANN_FORMS">(ANN) FORMS Annuity Forms Request â€“ 5 Business Days</option>
<option value="ANN_MATURITY">(ANN) MATURITY â€“ 7 Business Days</option>
<option value="ANN_MRD">(ANN) MRD Required Minimum Distribution â€“ 7â€“15 Business Days</option>
<option value="ANN_POLRES">(ANN) POLRES Research â€“ 7 Business Days</option>
<option value="ANN_QUOTES">(ANN) QUOTES â€“ 7 Business Days</option>

<option value="ANNST">ANNST Annual Statement (UL / ISL) â€“ 5 Business Days</option>
<option value="ANNSTANN">ANNSTANN Annual Statement (Annuity) â€“ 5 Business Days</option>

<option value="ANN_SURRX">(ANN) SURRX 1035 / Rollover â€“ 7 Business Days</option>
<option value="ANN_WITHDRAW">(ANN) WITHDRAW â€“ 7â€“15 Business Days</option>

<option value="BILCHG">BILCHG Billing Change â€“ 5 Business Days</option>
<option value="CCAUTH">CCAUTH Credit Card Authorization â€“ 5 Business Days</option>

<option value="CHKREISS">CHKREISS Check Reissue â€“ Per Call Center Guidelines</option>

<option value="CONVILLUST">CONVILLUST Conversion Illustration â€“ 7 Business Days</option>
<option value="CONVERSION">CONVERSION Policy Conversion â€“ 7 Business Days</option>

<option value="CORRESPONDENCE">CORRESPONDENCE Status Letter â€“ 5 Business Days</option>

<option value="DIVMAN">DIVMAN Dividend Reissue â€“ 7â€“15 Business Days</option>

<option value="DTHCLM">DTHCLM Death Claim â€“ < 10 Business Days</option>
<option value="CLMRES">CLMRES Claims Research â€“ 7 Business Days</option>

<option value="FORMS">FORMS General Forms Request â€“ 5 Business Days</option>

<option value="FUNDALLOC">FUNDALLOC Fund Allocation / Transfer â€“ 1â€“2 Business Days</option>

<option value="ILLUST">ILLUST Illustration Request â€“ 5 Business Days</option>

<option value="LOAN">LOAN Policy Loan â€“ 7 Business Days</option>
<option value="LOANRES">LOANRES Loan Research â€“ 7 Business Days</option>

<option value="MANBILL">MANBILL Manual Bill â€“ 5 Business Days</option>
<option value="MANEFT">MANEFT Remove Manual EFT â€“ 5 Business Days</option>

<option value="OWNCHG">OWNCHG Ownership Change â€“ 5 Business Days</option>

<option value="POLRES">POLRES Policy Research â€“ 7 Business Days</option>
<option value="PRMRESRCH">PRMRESRCH Premium Research â€“ 7 Business Days</option>

<option value="QUOTES">QUOTES Policy Quotes â€“ 5 Business Days</option>

<option value="REINST">REINST Reinstatement Review â€“ 5 Business Days</option>
<option value="RETCALL">RETCALL Escalation Callback â€“ 24â€“48 Hours</option>

<option value="RLRSEC1125">RLRSEC1125 RLR Contracts â€“ 7 Business Days</option>

<option value="SURR">SURR Policy Surrender â€“ 7 Business Days</option>
<option value="SURRX">SURRX 1035 Exchange (UL) â€“ 7 Business Days</option>

<option value="TAXQUOTE">TAXQUOTE Taxable Gain Quote â€“ 7 Business Days</option>

<option value="TERMCANCEL">TERMCANCEL Term Policy Cancellation â€“ 7 Business Days</option>

<option value="WITHDRAW">WITHDRAW Partial Withdrawal â€“ 7 Business Days</option>

    </select>
  </label>
  <label>Requested Form Sent Via:
    <select id="formMethod" onchange="toggleFormDestination()">
      <option value="none">-- Select --</option>
      <option value="Mail">Mail</option>
      <option value="Fax">Fax</option>
      <option value="Email">Email</option>
    </select>
  </label>
  <label id="formDestinationLabel" class="hidden">
  Sent To (Fax / Email / Address):
  <input type="text" id="formDestination" placeholder="Enter fax #, email, or address">
</label>

</div>

<!-- CURRENT DOCUMENTATION -->
<div class="column bottom">
  <h3>Current Documentation Entry</h3>
  <textarea id="currentDoc" rows="8" placeholder="Generated documentation will appear here..."></textarea>
  <div>
<div id="docuStatus" class="docu-status"></div>

<button onclick="copyCurrentDocumentation()">Copy</button>

    <button onclick="addCurrentDocumentation()">Add to History</button>
 
  </div>
</div>

<!-- HISTORY -->
<div class="column bottom">
  <h3>Documentation History</h3>
  <textarea id="historyDoc" rows="12" readonly placeholder="All notes will appear here..."></textarea> 
  <button onclick="clearHistory()" class="btn-accent">Clear History</button>
<div id="restoreNotice" style="display:none; color:#2b7a2b; font-size:13px;">
  âœ” Previous documentation restored
</div>
<button onclick="exportHistory()" class="btn-accent">
  Export History
</button>
</div>

<div id="quickLinks">
  <div class="ql-title">Quick Links</div>

 
<a href="https://dxcportal.sharepoint.com/sites/ProjectAntelope911/Shared%20Documents/04%20Business%20Ops%20and%20Testing/NET%20Documents/Call%20Center/Wilton%20Re%20Call%20Center%20Quality%20Guidebook.pdf?csf=1&e=KxQrqN&CID=2f0527e4-5395-476e-9030-fc5cdfc841d5" target="_blank">Wilton Re Call Center Quality Guidebook</a>
 <a href="https://dxcportal.sharepoint.com/sites/ProjectAntelope911/Shared%20Documents/04%20Business%20Ops%20and%20Testing/NET%20Documents/Call%20Center/Caller%20Authentication%20Guide.pdf?csf=1&e=EdzL78&CID=37aaf85e-7daf-46fb-a36e-56bd0ebd7b38" target="_blank">Caller Authentication Guide- Sharepoint</a>
 <a href="https://dxcportal.sharepoint.com/sites/ProjectAntelope911/Shared%20Documents/04%20Business%20Ops%20and%20Testing/NET%20Documents/Call%20Center/AWD%20Work%20Types%20Job%20Aid.pdf?csf=1&e=yDB3HH&CID=0594d9a0-5319-4af8-9cb5-fe0a4b6e2502" target="_blank">AWD Work Types Job Aid</a>
</div>

<!-- Floating Notepad -->
<div class="notes-container" id="notesContainer">
  <div class="notes-header">
    <span class="notes-title">Notes</span>
    <button onclick="toggleNotes()">âž–</button>
  </div>

  <textarea id="notesArea" rows="8" placeholder="Type notes here..."></textarea>
<div id="docuStatus" class="docu-status"></div>

  <div class="notes-buttons">
    <button onclick="insertTemplate('escalation')">Escalation</button>
    <button onclick="insertTemplate('its')">ITS</button>
    <button onclick="insertTemplate('callback')">Callback</button>
    <button onclick="insertTemplate('calllog')">Call Log</button>
    <button onclick="insertTemplate('question')">Question</button>
    <button onclick="insertTemplate('work')">Work Req</button>

    <button onclick="copyLast()">Copy Last</button>
    <button onclick="copyAll()">Copy All</button>
    <button onclick="clearNotes()">Clear</button>
  </div>
</div>

<!-- Minimized icon -->
<div id="notesMinimized" onclick="toggleNotes()">ðŸ“’</div>

<script>



function showDocuStatus(message) {
  const status = document.getElementById("docuStatus");
  status.textContent = message;
  status.style.opacity = "1";

  clearTimeout(status._timer);
  status._timer = setTimeout(() => {
    status.style.opacity = "0";
  }, 2000);
}
function copyCurrentDocumentation() {
  const currentBox = document.getElementById("currentDoc");

  if (!currentBox.value.trim()) {
    showDocuStatus("Nothing to copy");
    return;
  }

  currentBox.select();
  currentBox.setSelectionRange(0, 99999);

  navigator.clipboard.writeText(currentBox.value).then(() => {
    showDocuStatus("Current note copied âœ”");
  });
}
document.addEventListener("DOMContentLoaded", () => {
  const currentBox = document.getElementById("currentDoc");

  currentBox.addEventListener("keydown", (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "c") {
      setTimeout(() => {
        if (currentBox.selectionStart !== currentBox.selectionEnd) {
          showDocuStatus("Current note copied âœ”");
        }
      }, 0);
    }
  });
});

const notesArea = document.getElementById("notesArea");
const notesContainer = document.getElementById("notesContainer");
const notesMinimized = document.getElementById("notesMinimized");

const NOTES_KEY = "csrNotes";
const LAST_INDEX_KEY = "lastTemplateIndex";

const templates = {
  escalation: `--- Escalation ---
Caller Name / Title:
Policy Number:
Phone Number:
Validated:
Concern:
`,
  its: `--- ITS Request ---
Policy Number:
Work Item:
Reason:
`,
  callback: `--- Callback Request ---
Caller Name:
Policy Number:
Phone Number:
Concern:
`,
  calllog: `--- Call Log ---
Policy #:
Caller:
Verified:
Reason:
Resolution:
`,
  question: `--- Question ---
Policy Number:
Question:
`,
  work: `--- Work Request ---
Caller:
Issue:
Outcome:
`
};

function insertTemplate(type) {
  const notes = document.getElementById("notesArea");
  const template = templates[type];

  if (!template) return;

  const start = notes.selectionStart;

  notes.value =
    notes.value.slice(0, start) +
    template +
    notes.value.slice(start);

  notes.focus();
  notes.setSelectionRange(start + template.length, start + template.length);

  saveNotes();
}


function copyLast(){
  const text = notesArea.value;
  const index = parseInt(localStorage.getItem(LAST_INDEX_KEY));
  if (isNaN(index)) return alert("No template to copy.");
  navigator.clipboard.writeText(text.slice(index).trim());
}

function copyAll(){
  navigator.clipboard.writeText(notesArea.value);
}

function clearNotes(){
  if (!confirm("Clear all notes?")) return;
  notesArea.value = "";
  localStorage.removeItem(NOTES_KEY);
  localStorage.removeItem(LAST_INDEX_KEY);
}

function toggleNotes(){
  if (notesContainer.style.display === "none") {
    notesContainer.style.display = "block";
    notesMinimized.style.display = "none";
  } else {
    notesContainer.style.display = "none";
    notesMinimized.style.display = "flex";
  }
}

function saveNotes(){
  localStorage.setItem(NOTES_KEY, notesArea.value);
}

function loadNotes(){
  const saved = localStorage.getItem(NOTES_KEY);
  if (saved) notesArea.value = saved;
}

notesArea.addEventListener("input", saveNotes);
window.addEventListener("load", loadNotes);

function exportHistory(){
  const historyData = localStorage.getItem("docHistory");

  if (!historyData) {
    alert("No history to export.");
    return;
  }

  const parsed = JSON.parse(historyData);
  let output = "";

  Object.keys(parsed).sort().forEach(date => {
    output += `===== ${date} =====\n`;
    output += parsed[date].join("\n\n");
    output += "\n\n";
  });

  const blob = new Blob([output.trim()], { type: "text/plain" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = `CSR_History_${getTodayKey()}.txt`;
  document.body.appendChild(a);
  a.click();

  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function showRestoreNotice(){
  const notice = document.getElementById("restoreNotice");
  notice.style.display = "block";

  setTimeout(() => {
    notice.style.display = "none";
  }, 4000);
}

  function getTodayKey(){
  return new Date().toISOString().slice(0, 10);
}

function clearHistory(){
  if (!confirm("Clear all documentation history?")) return;
  document.getElementById("historyDoc").value = "";
  localStorage.removeItem("docHistory");
}

function startNewCall(){
  if (!confirm("Start a new call? Current documentation will be cleared.")) return;

 /* ===== TEXT INPUTS (EXCEPT HISTORY) ===== */
document.querySelectorAll("input[type='text'], textarea:not(#historyDoc)")
  .forEach(el => el.value = "");



  /* ===== DROPDOWNS ===== */
  document.querySelectorAll("select")
    .forEach(el => el.selectedIndex = 0);

  /* ===== CHECKBOXES ===== */
  document.querySelectorAll("input[type='checkbox']")
    .forEach(cb => cb.checked = false);

  /* ===== QUICK PHRASES ===== */
  selectedQuickPhrases = [];
  document.getElementById("quickPhrasesContainer").innerHTML = "";

  /* ===== AUTH SECTION ===== */
  document.getElementById("authChecklist").innerHTML = "";
  document.getElementById("authSection").classList.add("hidden");

  /* ===== VALUES FIELDS ===== */
  let currentAsOfDate = null;
document.querySelectorAll('.valueItem').forEach((checkbox) => {
  if (checkbox.value === "As Of Date") {
    const dateInput = checkbox.closest('label').querySelector('.valueField');

    dateInput.addEventListener('change', () => {
      if (!checkbox.checked || !dateInput.value) return;

      if (dateInput.value !== currentAsOfDate) {
        currentAsOfDate = dateInput.value;
        appendToDocumentation(`\nAs of ${currentAsOfDate}:\n`);
      }
    });
  }
});
document.querySelectorAll('.valueField').forEach((field) => {
  field.addEventListener('blur', () => {
    const label = field.closest('label');
    const checkbox = label.querySelector('.valueItem');

    if (!checkbox.checked || !field.value) return;
    if (checkbox.value === "As Of Date") return; // â›” skip date here
    if (!currentAsOfDate) return;                // â›” no date yet

    appendToDocumentation(`â€¢ ${checkbox.value}: ${field.value}\n`);
  });
});

function appendToDocumentation(text) {
  const docBox = document.getElementById("currentDoc");
  docBox.value += text;
}




  /* ===== CURRENT DOC ===== */
  document.getElementById("currentDoc").value = "";

  /* ===== OPTIONAL: RESET TIMER ===== */
  if (typeof resetTimer === "function") {
    resetTimer();
  }

  /* ===== REBUILD DOC (EMPTY) ===== */
  autoPopulateDocumentation();
}

  let selectedQuickPhrases = [];
function addQuickPhrase(text){
  if (!selectedQuickPhrases.includes(text)) {
    selectedQuickPhrases.push(text);
  }
  autoPopulateDocumentation();
}
function addQuickPhrase(text){
  if (selectedQuickPhrases.includes(text)) {
    selectedQuickPhrases = selectedQuickPhrases.filter(p => p !== text);
  } else {
    selectedQuickPhrases.push(text);
  }
  autoPopulateDocumentation();
}
function toggleFormDestination() {
  const method = document.getElementById("formMethod").value;
  const label = document.getElementById("formDestinationLabel");

  if (method !== "none") {
    label.classList.remove("hidden");
  } else {
    label.classList.add("hidden");
    document.getElementById("formDestination").value = "";
  }

  autoPopulateDocumentation();
}

// ---------- AUTH MAPPING ----------
const authMapping = {
   company1035: ["Policy Number (WRM Policy Only)","Caller Full Name","1035 Company Address","Insured Full Name","Insured Date of Birth"],
  activeAgent: ["Policy Number (WRM Policy Only)","Agent or Agency Name","Agency Number","Agency Address or Last 4 of Agent SSN"],
  activeAgentAssistant: ["Policy Number (WRM Policy Only)","Assistant Full Name","Agent or Agency Name","Agency Number","Agency Address or Last 4 of Agent SSN"],
  assigneeCompany: ["Policy Number (WRM Policy Only)","Assignee Full Name","Last 4 of SSN","Insured DOB","Address","Last Payment Date"],
  beneficiaryEstate: ["Policy Number (WRM Policy Only)","Beneficiary Name","Estate Address","Estate Tax ID","Death Certificate or Estate Docs on File"],
  company: ["Policy Number (WRM Policy Only)","Officer Name","Officer Title","Company Tax ID"],
  funeralHome: ["Policy Number","Insured Name","Insured Date of Birth","Funeral Home Address"],
  gabor: ["Agent Name","Caller stated affiliation with Gabor Agency"],
  livingBeneficiary: ["Policy Number (WRM Policy Only)","Beneficiary Name","Beneficiary SSN","Beneficiary Current Address"],
  livingContingentBeneficiary: ["Policy Number (WRM Policy Only)","Contingent Beneficiary Name","Contingent Beneficiary SSN","Contingent Beneficiary Current Address"],
  namedEstate: ["Policy Number (WRM Policy Only)","Estate Name","Executor Name","Estate Address","Estate Tax ID","Executor Documentation on File"],
  annuityPayee: ["Policy Number","Payee Name","Payee SSN or Tax ID","Payee Current Address"],
  policyOwner: ["Policy Number","Last 4 of SSN","Insured DOB","Current Address","Last Payment Date"],
  premiumPayor: ["Policy Number","Last 4 of SSN","Insured DOB","Payment History"],
  servicingAgent: ["Policy Number","Servicing Agent Name","Agent Address","Agency Number","Last 4 of SSN"],
  servicingAgentAssistant: ["Policy Number","Assistant Name","Servicing Agent Name","Agent Address","Agency Number"],
  thirdParty: ["Policy Number","Authorized Third Party or POA on File","DOB or SSN","Current Address"],
  trust: ["Policy Number","Trustee Name","Trust Tax ID","Trust Date"],
  trustBeneficiary: ["Policy Number","Trustee Name","Trustee Address","Trust Tax ID","Completed Claim or Trust Verification Form on File"],
  amelia: ["Authentication completed using Amelia system information"]
};

// ---------- QUICK PHRASES ----------
const quickPhrases = {
 "ITS Request":["Initial Effective Date","Work Item","Reason"], 
"1035 Status":["Explained 1035 process","Discussed status of request","sent forms to caller"],
"Abort/Hang Up/Disconnect - Insured":["Noted disconnected call","Scheduled callback if needed","Logged disconnect in system"],
"Accounting/Billing Issues":["Reviewed billing info","Provided payment instructions","Escalated to billing team if needed"],
"ACH Payment":["Confirmed ACH details","Updated ACH info","Verified scheduled payment date","Sent forms"],
"Address Change":["Verified address","Updated address","Confirmed with caller"],
"Amount due on the policy":["Provided current balance","Discussed due date","Explained payment options"],
"Annual Statement":["Confirmed statement sent on (date)","Provided summary","Explained statement details"],
"Annuity WD":["Explained withdrawal options","Provided forms","Confirmed processing time"],
"Bank Account Update":["Verified new account is in the system","Sent forms","Confirmed with caller"],
"Beneficiary Change":["Confirmed request","Sent form","Explained processing time"],
"Billing - Payment Status":["Reviewed payment history","Confirmed last payment","Provided next due date"],
"Billing - question about notice":["Explained notice","Verified policy info","Scheduled follow-up if needed"],
"Call Disconnected":["Logged disconnect","Noted reason if known","Scheduled callback if necessary"],
"Cancellation":["Noted cancellation request","Provided confirmation","Updated system records"],
"Change Payment Plan - Amount":["Explained options","Updated payment plan","Confirmed new plan details"],
"Check Status":["Confirmed check status","Provided expected delivery","Logged in system"],
"CLAIMS Notification of Death Lapsed Policy":["Verified policy","Noted claim request","Escalated claim processing"],
"CLAIM Inquiry Regarding Paid Claim":["Verified claim status","Provided payment details","Explained process"],
"CLAIMS Paperwork Explanation":["Explained required paperwork","Sent forms","Provided deadlines"],
"CLAIMS Status of Claim in Process":["Checked claim progress","Updated caller","Escalated if delayed"],
"Claims_notification of death":["Verified details","Noted request","Scheduled follow-up"],
"Claims_Status":["Reviewed claim","Provided status update","Explained next steps"],
"Coverage Confirmation/ Policy Status - Agent":["Confirmed coverage","Verified status","Noted in system"],
"DI Claim":["Verified claim details","Explained process","Scheduled follow-up"],
"Duplicate Policy":["Confirmed duplication","Noted in system","Provided resolution options"],
"Escalated Call":["Transfer to Escalations","requested to expedite","Submitted ITS","Diarized callback" ],
"Form Explanation":["Explained form purpose","Guided caller through sections","Provided submission instructions"],
"Form Request":["Verified request","Sent form","Logged request"],
"General Inquiry - Agent":["Answered inquiry","Provided guidance","Escalated if needed"],
"General Inquiry - Insured":["Answered question","Provided policy info","Scheduled follow-up if needed"],
"Illustration Request":["Verified request","Sent illustration","Explained details"],
"Incoming Fax_Mail Received":["Logged incoming document","Noted in system","Acknowledged receipt"],
"IRD Outbound Policy Cancelled Wrong Product":["Noted error","Escalated to correct team","Informed caller"],
"Loan by Phone":["Verified loan request","Provided instructions","Logged transaction"],
"Loan Request":["Verified loan eligibility","Provided forms","Scheduled processing"],
"Loan Status":["Checked loan status","Updated caller","Escalated if delayed"],
"Mailing Address_Phone_Fax":["Provided Corre Address","Provided fax number","Provided email/website", "provided payment address"],
"Maturity":["Explained maturity options","Provided payout info","Scheduled follow-up"],
"Misdirected Call":["Redirected call","Informed correct team","Logged misdirection"],
"NB_Policy Status":["Verified new business policy","Provided status","Escalated if needed"],
"No Authorization":["Noted lack of authorization","Escalated appropriately","Informed caller"],
"No disposition":["Logged call","Noted reason","Scheduled follow-up if needed"],
"Notify of Waiver of DI Claim":["Confirmed waiver","Updated records","Informed caller"],
"Ownership Change":["Sent forms","Provided status of request","Confirmed processing time"],
"Partial Withdrawal":["Explained withdrawal","sent forms","Quoted values"],
"Pay by Phone_Credit Card":["Verified payment","Processed transaction","Provided confirmation"],
"Payment Process - Agent":["Explained process","Guided agent","Logged call"],
"Payment Received":["Confirmed payment","Noted in system","Provided receipt info"],
"Payment Status":["Verified status","Updated caller","Escalated if delayed"],
"Policy Change":["Confirmed requested change","Updated system","Informed caller"],
"Policy Change/Status/Value/Quote":["Reviewed policy details","Updated changes","Explained values"],
"Policy Info_Authorization":["Verified authorization","Provided info","Logged documentation"],
"Policy Info_No Authorization":["Denied access","Explained requirements","Escalated if needed"],
"Policy Status":["Confirmed policy status","Explained details","Logged call"],
"Policy Value":["Provided value info","Explained calculation","Noted in system"],
"Premium_online payment issue":["Verified payment","Provided instructions","Scheduled resolution"],
"Premium_Payment being mailed":["Confirmed mailing date","Logged transaction","Provided follow-up info"],
"Privacy Notice":["Explained notice","Confirmed understanding","Noted in system"],
"Reinstatement":["Explained process","Provided forms","Scheduled follow-up"],
"RMD":["Explained process","Sent forms","Quoted Values"],
"Surrender Request":["Verified request","Provided forms","Explained timeline"],
"Surrender Status":["Checked status","Updated caller","Noted in system"],
"System Down":["Noted outage","Provided alternative instructions","Delivered System Down Script"],
"Tax Inquiry":["Reviewed tax info","Provided guidance","Logged call"],
"Transfer Other":["Verified transfer","Updated system","Confirmed with caller"],
"Unauthorized Caller":["Denied access","Escalated security","Logged attempt"],
"Unknown_PolNum_PO":["Verified info","Guided caller","Scheduled follow-up"],
"Withdrawal/Surrender Request/Status":["Explained process","Provided forms","Updated status"],
"Policy Info/Values":["Provided requested info","Verified details","Logged call"],
"Billing":["Discussed Billing statement received", "Discussed payment options (Money Order, Check my mail, PAC, BillPay, One-time payment via website)", "Explained Grace Letter", "Requested MINPREM letter sent to caller"],
"Status of Existing Request":["Checked request","Provided update","Escalated if needed"],
"Escalated":["Logged escalation","Notified correct team","Followed up with caller"],
"Distribution Inquiry":["Verified request","Provided info","Logged in system"],
"Surrender":["Confirmed surrender","Updated system","Provided confirmation"],
"General Questions":["Answered questions","Provided guidance","Escalated if necessary"],
"Reinstatement Request":["Verified request","Provided forms","Scheduled processing"],
"Other":["Noted call details","Logged in system","Followed up as needed"],
"Claims Inquiry Regarding Paid Claim":["Verified claim","Provided payment details","Explained next steps"],
"Tax Question":["Reviewed tax info","Provided guidance","Logged call"],
"Agent call/Policy Status":["Provided policy update","Noted in system","Escalated if needed"],
"Abort/Hang Up/Disconnect":["Logged disconnect","Scheduled callback","Noted reason"],
"Agent call/Values":["Provided requested values","Logged details","Escalated if needed"],
"Conversion":["Explained conversion","Updated system","Confirmed with caller"],
"Form Assistance":["Guided caller","Provided instructions","Logged support"],
"Website Assistance":["Guided on website","Resolved issue","Logged call"],
};


// ---------- FUNCTIONS ----------
function showAuthByRole(){
  const role = document.getElementById("callerRole").value;
  const checklist = document.getElementById("authChecklist");
  checklist.innerHTML = "";
  if(!role) { document.getElementById("authSection").classList.add("hidden"); return; }
  document.getElementById("authSection").classList.remove("hidden");
  authMapping[role].forEach(item => {
    checklist.innerHTML += `<label><input type="checkbox" class="authItem" value="${item}"> ${item}</label>`;
  });
}

function showQuickPhrases(){
  selectedQuickPhrases = []; // reset on reason change
  const reason = document.getElementById("callReason").value;
  const container = document.getElementById("quickPhrasesContainer");
  container.innerHTML = "";
  if(!reason || !quickPhrases[reason]) return;

  quickPhrases[reason].forEach(phrase => {
    container.innerHTML += `
      <span class="quickPhraseBtn" onclick="addQuickPhrase('${phrase}')">
        ${phrase}
      </span>`;
  });

  autoPopulateDocumentation();
}
function autoPopulateDocumentation(){
  const policy = document.getElementById("policyNumber").value;
  const name = document.getElementById("callerName").value;
  const phone = document.getElementById("callerPhone").value;

  const roleSelect = document.getElementById("callerRole");
  const roleText = roleSelect.options[roleSelect.selectedIndex]?.text || "";

  const verifiedAuth = [...document.querySelectorAll(".authItem:checked")]
    .map(cb => cb.value);

  const reason = document.getElementById("callReason").value;

  const valuesSelected = [...document.querySelectorAll(".valueItem:checked")]
    .map(cb => {
      const val = cb.parentElement.querySelector(".valueField").value || "N/A";
      return `${cb.value}: ${val}`;
    });

  const workSelect = document.getElementById("createdWork");
  const workTypeText = workSelect.options[workSelect.selectedIndex]?.text || "";
  const workTAT = extractTAT(workTypeText);

  const formMethod = document.getElementById("formMethod").value;
  const freeNotes = document.getElementById("freeNotes").value;
  const formDestination = document.getElementById("formDestination").value;


  let doc = "";

  if (name) doc += `Caller Name: ${name}. `;
  if (policy) doc += `Policy Number: ${policy}. `;
  if (phone) doc += `Phone: ${phone}. `;
  if (roleText) doc += `Role: ${roleText}. `;

  if (verifiedAuth.length)
    doc += `Authentication verified using: ${verifiedAuth.join(", ")}. `;

  if (reason) doc += `Reason for Call: ${reason}. `;

  if (selectedQuickPhrases.length)
    doc += `Discussion Points: ${selectedQuickPhrases.join(", ")}. `;

  if (valuesSelected.length)
    doc += `Values Provided: ${valuesSelected.join(", ")}. `;

  if (workTypeText) {
    const workName = workTypeText.split("â€“")[0].trim();
    doc += `Work Created: ${workName}. `;
    if (workTAT) doc += `Turnaround Time Provided: ${workTAT}. `;
  }

 if (formMethod !== "none") {
  if (formDestination) {
    doc += `Form Sent Via: ${formMethod} (${formDestination}). `;
  } else {
    doc += `Form Sent Via: ${formMethod}. `;
  }
}


  if (freeNotes)
    doc += `Additional Notes: ${freeNotes}. `;

  document.getElementById("currentDoc").value = doc.trim();
}
document.querySelectorAll(
  "#policyNumber, #callerName, #callerPhone, #callerRole, #callReason, #createdWork, #formMethod, #formDestination, #freeNotes"
).forEach(el => {
  el.addEventListener("input", autoPopulateDocumentation);
  el.addEventListener("change", autoPopulateDocumentation);
});


document.addEventListener("change", (e) => {
  if (
    e.target.classList.contains("authItem") ||
    e.target.classList.contains("valueItem") ||
    e.target.classList.contains("valueField")
  ) {
    autoPopulateDocumentation();
  }
});

function extractTAT(workTypeText) {
  if (!workTypeText) return "";

  // Extract everything after the dash (â€“ or -)
  const match = workTypeText.match(/â€“\s*(.+)$/) || workTypeText.match(/-\s*(.+)$/);
  return match ? match[1].trim() : "";
}

function addCurrentDocumentation(){
  const currentDoc = document.getElementById("currentDoc").value;
  if (!currentDoc) return;

  const historyBox = document.getElementById("historyDoc");

  const now = new Date();
  const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  const dateKey = getTodayKey();

  const entry = `[${time}]\n${currentDoc}`;

  let historyData = JSON.parse(localStorage.getItem("docHistory")) || {};

  if (!historyData[dateKey]) {
    historyData[dateKey] = [];
  }

  historyData[dateKey].push(entry);

  localStorage.setItem("docHistory", JSON.stringify(historyData));

  renderHistory();
}

function renderHistory(){
  const historyBox = document.getElementById("historyDoc");
  const historyData = JSON.parse(localStorage.getItem("docHistory")) || {};

  let output = "";

  Object.keys(historyData).sort().forEach(date => {
    output += `===== ${date} =====\n`;
    output += historyData[date].join("\n\n");
    output += "\n\n";
  });

  historyBox.value = output.trim();
  historyBox.scrollTop = historyBox.scrollHeight;
}


// ===== TYPE-TO-SEARCH DROPDOWNS =====
function enableTypeSearch(selectId) {
  const select = document.getElementById(selectId);
  if (!select) return;

  let typed = "";
  let timeout;

  select.addEventListener("keydown", (e) => {
    if (e.key.length === 1) {
      typed += e.key.toLowerCase();
      clearTimeout(timeout);

      for (let option of select.options) {
        if (option.text.toLowerCase().startsWith(typed)) {
          option.selected = true;
          break;
        }
      }

      timeout = setTimeout(() => typed = "", 700);
    }
  });
}

// ENABLE SEARCH ON THESE DROPDOWNS
enableTypeSearch("callReason");
enableTypeSearch("callerRole");
enableTypeSearch("createdWork");
enableTypeSearch("formMethod");
window.addEventListener("load", () => {
  const historyData = localStorage.getItem("docHistory");
  if (historyData) {
    renderHistory();
    showRestoreNotice();
  }
});

</script>
</body>
</html>
</div>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Standalone Timer</title>

  <style>
    .timer-container {
      position: fixed;
      top: 90px;
      right: 30px;
      background-color: black;
      padding: 12px;
      border-radius: 6px;
      z-index: 1000;
      text-align: center;
      display: inline-block;
    }

    .timer {
      color: white;
      font-weight: bold;
      margin-bottom: 6px;
      line-height: 1;
      transition: font-size 0.2s ease;
    }

    button {
      padding: 6px 8px;
      margin: 3px;
      font-size: 13px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #startBtn { background-color: #4CAF50; color: white; }
    #stopBtn { background-color: #f44336; color: white; }
    #resetBtn { background-color: #008CBA; color: white; }

    #silentHoldBtn { background-color: #9E9E9E; color: black; }
    #holdBtn { background-color: #FF9800; color: black; }

    #zoomInBtn, #zoomOutBtn {
      background-color: #607D8B;
      color: white;
      font-weight: bold;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .yellow-blink {
      color: yellow;
      animation: blink 1s step-start infinite;
    }

    .red-blink {
      color: red;
      animation: blink 0.5s step-start infinite;
    }
  </style>
</head>

<body>

  <div class="timer-container">
    <div class="timer" id="timer">00:00</div>

    <!-- SIZE CONTROLS -->
    <button id="zoomOutBtn">Aâˆ’</button>
    <button id="zoomInBtn">A+</button><br>

    <!-- HOLD MODES -->
    <button id="silentHoldBtn">Silent Hold</button>
    <button id="holdBtn">Hold</button><br>

    <!-- CONTROLS -->
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
    <button id="resetBtn">Reset</button>
  </div>

  <script>
    let timer;
    let seconds = 0;
    let isRunning = false;
    let holdMode = "none"; // none | silent | full

    let fontSize = 48; // DEFAULT size (user adjustable)
    const MIN_SIZE = 24;
    const MAX_SIZE = 120;

    const timerDisplay = document.getElementById("timer");

    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");
    const resetBtn = document.getElementById("resetBtn");
    const silentHoldBtn = document.getElementById("silentHoldBtn");
    const holdBtn = document.getElementById("holdBtn");
    const zoomInBtn = document.getElementById("zoomInBtn");
    const zoomOutBtn = document.getElementById("zoomOutBtn");

    /* =========================
       FIXED VOICE FUNCTION
    ========================== */
    function speak(message) {
      if (!("speechSynthesis" in window)) return;

      // Cancel any ongoing speech to avoid truncation
      speechSynthesis.cancel();

      // Create a new utterance
      const utterance = new SpeechSynthesisUtterance(message);
      utterance.rate = 0.95;
      utterance.pitch = 1.0;
      utterance.volume = 1;

      // Optional: choose a female English voice
      const voices = speechSynthesis.getVoices();
      const preferredVoice = voices.find(v =>
        v.lang.startsWith("en") && v.name.toLowerCase().includes("female")
      );
      if (preferredVoice) utterance.voice = preferredVoice;

      // Slight delay to ensure utterance plays fully
      setTimeout(() => {
        speechSynthesis.speak(utterance);
      }, 50);
    }

    /* =========================
       TIMER UPDATE
    ========================== */
    function updateTimer() {
      const minutes = Math.floor(seconds / 60);
      const secs = seconds % 60;

      timerDisplay.textContent =
        `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
      timerDisplay.style.fontSize = fontSize + "px";

      // SILENT HOLD â€” 15s initial + recurring every 10s
      if (holdMode === "silent") {
        timerDisplay.classList.add("yellow-blink");
        timerDisplay.classList.remove("red-blink");

        if (seconds === 15 || (seconds > 15 && (seconds - 15) % 10 === 0)) {
          speak("Please update your caller.");
        }
      }

      // FULL HOLD â€” 1:45+ reminders only
      else if (holdMode === "full") {
        if (seconds >= 105) {
          timerDisplay.classList.add("red-blink");
          timerDisplay.classList.remove("yellow-blink");

          if (seconds === 105 || (seconds > 120 && (seconds - 120) % 15 === 0)) {
            speak("Please go back to your caller.");
          }
        } else {
          timerDisplay.classList.remove("yellow-blink", "red-blink");
        }
      }

      // No hold mode
      else {
        timerDisplay.classList.remove("yellow-blink", "red-blink");
      }
    }

    /* =========================
       SIZE CONTROLS
    ========================== */
    zoomInBtn.addEventListener("click", () => {
      if (fontSize < MAX_SIZE) {
        fontSize += 6;
        updateTimer();
      }
    });

    zoomOutBtn.addEventListener("click", () => {
      if (fontSize > MIN_SIZE) {
        fontSize -= 6;
        updateTimer();
      }
    });

    /* =========================
       BUTTON LOGIC
    ========================== */
    silentHoldBtn.addEventListener("click", () => {
      holdMode = "silent";
      resetTimer();
      startTimer();
    });

    holdBtn.addEventListener("click", () => {
      holdMode = "full";
      resetTimer();
      startTimer();
    });

    startBtn.addEventListener("click", startTimer);

    stopBtn.addEventListener("click", () => {
      isRunning = false;
      clearInterval(timer);
    });

    resetBtn.addEventListener("click", resetTimer);

    function startTimer() {
      if (!isRunning) {
        isRunning = true;
        timer = setInterval(() => {
          seconds++;
          updateTimer();
        }, 1000);
      }
    }

    function resetTimer() {
      isRunning = false;
      clearInterval(timer);
      seconds = 0;
      timerDisplay.classList.remove("yellow-blink", "red-blink");
      updateTimer();
    }

    updateTimer();
  </script>


</body>
</html>



<footer>
    DOCU_ASSIST.V012546_CDG
</footer>



